<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zettlab Research Hub · 用研规范 Demo</title>
  <style>
    :root {
      /* Light Mode (Default) */
      --bg: #ffffff;
      --card-bg: rgba(0, 0, 0, 0.03);
      --card-border: rgba(0, 0, 0, 0.08);
      --text-primary: #111111;
      --text-secondary: rgba(0, 0, 0, 0.6);
      --accent: #7c3aed;
      --accent-glow: rgba(124, 58, 237, 0.08);
      --topbar-bg: rgba(255, 255, 255, 0.8);
      --modal-bg: #ffffff;
      --filter-bg: rgba(255, 255, 255, 0.8);
      --pre-bg: #f8f9fa;
      
      --radius-xl: 32px;
      --radius-lg: 24px;
      --radius-md: 16px;
      --radius-sm: 12px;
      --font-main: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    [data-theme="dark"] {
      --bg: #050505;
      --card-bg: rgba(255, 255, 255, 0.03);
      --card-border: rgba(255, 255, 255, 0.08);
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.6);
      --accent: #a78bfa;
      --accent-glow: rgba(167, 139, 250, 0.15);
      --topbar-bg: rgba(5, 5, 5, 0.8);
      --modal-bg: #111111;
      --filter-bg: rgba(5, 5, 5, 0.8);
      --pre-bg: #1a1a1a;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: var(--font-main);
      background-color: var(--bg);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
      transition: background-color 0.3s, color 0.3s;
    }

    .glow {
      position: fixed;
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
      z-index: -1;
      pointer-events: none;
      background-image: 
        radial-gradient(circle at 20% 20%, var(--accent-glow) 0%, transparent 40%),
        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.05) 0%, transparent 40%);
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

    /* Topbar */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--topbar-bg);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--card-border);
    }
    .topbar-inner {
      height: 72px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .brand { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--text-primary); }
    .brand-logo { width: 32px; height: 32px; background: linear-gradient(135deg, #7c3aed, #3b82f6); border-radius: 10px; }
    .brand-text strong { font-size: 18px; font-weight: 700; display: block; }
    .brand-text span { font-size: 12px; color: var(--text-secondary); }

    .nav { display: flex; gap: 8px; }
    .nav a {
      padding: 8px 16px;
      border-radius: 99px;
      text-decoration: none;
      color: var(--text-secondary);
      font-size: 14px;
      transition: all 0.2s;
    }
    .nav a:hover, .nav a.active { color: var(--text-primary); background: var(--card-bg); }

    .top-tools { display: flex; align-items: center; gap: 12px; }
    .search-box {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 99px;
      padding: 6px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .search-box input {
      background: transparent;
      border: none;
      color: var(--text-primary);
      outline: none;
      font-size: 14px;
      width: 180px;
    }
    .btn-tool {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text-primary);
      padding: 6px 12px;
      border-radius: 99px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-tool:hover { background: var(--card-border); }

    /* Hero */
    .hero { padding: 80px 0 60px; text-align: center; }
    .hero h1 { font-size: 56px; font-weight: 800; margin-bottom: 16px; letter-spacing: -0.02em; }
    .hero p { font-size: 18px; color: var(--text-secondary); max-width: 800px; margin: 0 auto 32px; }
    .hero-actions { display: flex; justify-content: center; gap: 16px; }
    .btn-primary {
      background: var(--text-primary);
      color: var(--bg);
      padding: 12px 24px;
      border-radius: 99px;
      font-weight: 600;
      text-decoration: none;
      transition: transform 0.2s;
      border: none;
      cursor: pointer;
    }
    .btn-primary:hover { transform: translateY(-2px); }
    .btn-secondary {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text-primary);
      padding: 12px 24px;
      border-radius: 99px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.2s;
      cursor: pointer;
    }
    .btn-secondary:hover { background: var(--card-border); }

    /* Value Cards */
    .value-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-top: 60px; }
    .value-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      padding: 32px;
      border-radius: var(--radius-xl);
      text-align: left;
      transition: border-color 0.3s;
    }
    .value-card:hover { border-color: var(--accent); }
    .value-card h3 { font-size: 20px; margin-bottom: 12px; }
    .value-card p { color: var(--text-secondary); font-size: 14px; }

    /* Section Headers */
    .section { padding: 80px 0; }
    .section-header { margin-bottom: 40px; }
    .section-header h2 { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
    .section-header p { color: var(--text-secondary); font-size: 16px; }

    /* Filter Bar - Full Width Background */
    .filter-container {
      position: sticky;
      top: 72px;
      z-index: 90;
      background: var(--filter-bg);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--card-border);
      margin-bottom: 32px;
      width: 100%;
      display: flex;
      justify-content: center;
    }
    .filter-bar {
      width: 100%;
      max-width: 1200px;
      padding: 12px 24px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 0;
    }
    .filter-chip {
      padding: 8px 20px;
      border-radius: 99px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text-secondary);
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .filter-chip:hover { color: var(--text-primary); border-color: var(--text-secondary); }
    .filter-chip.active { background: var(--text-primary); color: var(--bg); border-color: var(--text-primary); }

    /* Grid Layouts */
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 24px; }
    .card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius-lg);
      padding: 24px;
      transition: all 0.3s;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    .card:hover { transform: translateY(-4px); border-color: var(--accent); box-shadow: 0 20px 40px rgba(0,0,0,0.05); }
    [data-theme="dark"] .card:hover { box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
    .card-tag { font-size: 12px; font-weight: 600; color: var(--accent); text-transform: uppercase; letter-spacing: 0.05em; }
    .card h3 { font-size: 18px; font-weight: 600; }
    .card p { font-size: 14px; color: var(--text-secondary); flex-grow: 1; }
    .card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
    .card-btn {
      background: transparent;
      border: 1px solid var(--card-border);
      color: var(--text-primary);
      padding: 8px 16px;
      border-radius: 99px;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .card-btn:hover { background: var(--text-primary); color: var(--bg); }

    /* SOP Flow */
    .sop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 24px; }
    .sop-step {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      padding: 20px;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    .sop-step:hover, .sop-step.active { border-color: var(--accent); background: var(--accent-glow); }
    .sop-step span { display: block; font-size: 12px; color: var(--accent); font-weight: 700; margin-bottom: 4px; }
    .sop-step strong { font-size: 14px; display: block; line-height: 1.2; }
    
    .sop-detail {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius-lg);
      padding: 32px;
      display: none;
    }
    .sop-detail.active { display: block; animation: fadeIn 0.3s ease; }
    .sop-detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
    .sop-detail h4 { font-size: 16px; margin-bottom: 16px; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }
    .sop-detail ul { list-style: none; }
    .sop-detail li { margin-bottom: 12px; font-size: 15px; display: flex; gap: 10px; }
    .sop-detail li::before { content: "→"; color: var(--accent); }

    /* Governance */
    .gov-flow { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
    .gov-box {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      padding: 24px;
      border-radius: var(--radius-lg);
      position: relative;
    }
    .gov-box::after {
      content: "→";
      position: absolute;
      right: -12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--card-border);
      font-size: 20px;
    }
    .gov-box:last-child::after { display: none; }
    .gov-box h4 { font-size: 16px; margin-bottom: 8px; }
    .gov-box p { font-size: 13px; color: var(--text-secondary); }

    .gov-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .gov-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      padding: 32px;
      border-radius: var(--radius-xl);
    }
    .gov-card h3 { font-size: 20px; margin-bottom: 24px; }
    .gov-list { list-style: none; }
    .gov-list li {
      padding: 12px 0;
      border-bottom: 1px solid var(--card-border);
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .gov-list li:last-child { border-bottom: none; }
    .gov-list li::before { content: "•"; color: var(--accent); margin-right: 12px; }

    /* Repository */
    .repo-section {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: var(--radius-xl);
      padding: 40px;
      margin-top: 40px;
    }
    .repo-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
    .repo-code {
      background: var(--pre-bg);
      padding: 24px;
      border-radius: var(--radius-md);
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      position: relative;
    }
    .repo-code button {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      color: var(--text-primary);
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 11px;
      cursor: pointer;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(5px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }
    .modal-overlay.show { display: flex; }
    .modal {
      background: var(--modal-bg);
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      border-radius: var(--radius-xl);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 40px 80px rgba(0,0,0,0.2);
    }
    .modal-header {
      padding: 24px 32px;
      border-bottom: 1px solid var(--card-border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal-close { background: none; border: none; font-size: 24px; color: var(--text-secondary); cursor: pointer; }
    .modal-body { padding: 32px; overflow-y: auto; }
    .modal-body pre {
      background: var(--pre-bg);
      padding: 20px;
      border-radius: var(--radius-md);
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      white-space: pre-wrap;
      color: var(--text-primary);
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--text-primary);
      color: var(--bg);
      padding: 12px 24px;
      border-radius: 99px;
      font-size: 14px;
      font-weight: 600;
      z-index: 2000;
      display: none;
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    @media (max-width: 768px) {
      .hero h1 { font-size: 40px; }
      .value-grid, .grid, .gov-flow, .gov-grid, .repo-grid, .sop-detail-grid { grid-template-columns: 1fr; }
      .topbar-inner { padding: 0 16px; }
      .nav { display: none; }
    }
  </style>
</head>
<body>
  <div class="glow"></div>

  <header class="topbar">
    <div class="container topbar-inner">
      <a href="#" class="brand">
        <div class="brand-logo"></div>
        <div class="brand-text">
          <strong>Zettlab Research Hub</strong>
          <span id="brandSub">用证据驱动 NAS 体验决策</span>
        </div>
      </a>
      <nav class="nav">
        <a href="#overview" class="active">首页</a>
        <a href="#sop">SOP 流程</a>
        <a href="#methods">方法库</a>
        <a href="#templates">模板</a>
        <a href="#governance">治理</a>
      </nav>
      <div class="top-tools">
        <div class="search-box">
          <input type="text" id="searchInput" placeholder="搜索方法 / 模板 / 研究案例..." oninput="handleSearch()">
        </div>
        <button class="btn-tool" onclick="toggleLang()">CN/EN</button>
        <button class="btn-tool" id="themeToggle" onclick="toggleTheme()">Dark</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Hero -->
    <section class="hero" id="overview">
      <h1 id="heroTitle">用研规范与知识库</h1>
      <p id="heroDesc">为 NAS 桌面端、Web 管理端及移动端打造的标准化研究体系，确保研究结果可复现、可行动、可验证。</p>
      <div class="hero-actions">
        <button class="btn-primary" onclick="openTemplate(1)" id="ctaStart">发起研究 / Start Study</button>
        <button class="btn-secondary" onclick="openTemplate(2)" id="ctaUT">运行 UT / Run UT</button>
        <button class="btn-secondary" onclick="openTemplate(5)" id="ctaRepo">归档规范 / Repository</button>
      </div>

      <div class="value-grid">
        <div class="value-card">
          <h3 id="val1Title">可复现 / Reproducible</h3>
          <p id="val1Desc">标准化的 SOP 流程与方法工具箱，确保不同研究员在面对相似问题时能产出一致的高质量结果。</p>
        </div>
        <div class="value-card">
          <h3 id="val2Title">可行动 / Actionable</h3>
          <p id="val2Desc">研究结论直接挂钩 Backlog 与 Design System，确保每一个洞察都能转化为具体的产品改进项。</p>
        </div>
        <div class="value-card">
          <h3 id="val3Title">可验证 / Verifiable</h3>
          <p id="val3Desc">建立核心体验指标（Suggested Metrics），通过持续的可用性测试验证设计方案的有效性。</p>
        </div>
      </div>
    </section>

    <!-- Research Status -->
    <section class="section">
      <div class="section-header">
        <h2 id="statusTitle">研究动态 / Research Status</h2>
        <p id="statusDesc">当前正在进行的重点研究项目及最新归档案例。</p>
      </div>
      <div class="grid" id="statusGrid"></div>
    </section>

    <!-- SOP -->
    <section class="section" id="sop">
      <div class="section-header">
        <h2 id="sopTitle">标准研究流程 / Standard Research Flow (SOP)</h2>
        <p id="sopDesc">从需求对齐到 DS 更新的 7 步标准化作业程序。</p>
      </div>
      <div class="sop-grid" id="sopGrid"></div>
      <div class="sop-detail" id="sopDetail">
        <div class="sop-detail-grid">
          <div>
            <h4 id="whatTitle">本步要做什么</h4>
            <ul id="sopWhatList"></ul>
          </div>
          <div>
            <h4 id="outputTitle">本步产出</h4>
            <ul id="sopOutputList"></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Methods -->
    <section class="section" id="methods">
      <div class="section-header">
        <h2 id="methodsTitle">方法工具箱 / Method Toolkit</h2>
        <p id="methodsDesc">根据研究问题选择最合适的方法。</p>
      </div>
      <div class="filter-container">
        <div class="filter-bar" id="methodFilters"></div>
      </div>
      <div class="grid" id="methodGrid"></div>
    </section>

    <!-- Templates -->
    <section class="section" id="templates">
      <div class="section-header">
        <h2 id="templatesTitle">实战模板 / Practical Templates</h2>
        <p id="templatesDesc">直接复用的计划、脚本与归档模板。</p>
      </div>
      <div class="filter-container">
        <div class="filter-bar" id="tplFilters"></div>
      </div>
      <div class="grid" id="tplGrid"></div>
    </section>

    <!-- Governance -->
    <section class="section" id="governance">
      <div class="section-header">
        <h2 id="govTitle">研究治理 / Research Governance</h2>
        <p id="govDesc">确保研究资产的长期价值与跨团队协作效率。</p>
      </div>
      
      <div class="gov-flow">
        <div class="gov-box">
          <h4 id="govFlow1">Evidence</h4>
          <p id="govFlow1Desc">访谈/UT/日志/问卷，形成可追溯证据链。</p>
        </div>
        <div class="gov-box">
          <h4 id="govFlow2">Insights</h4>
          <p id="govFlow2Desc">洞察卡片：证据 → 含义 → 机会点。</p>
        </div>
        <div class="gov-box">
          <h4 id="govFlow3">Actions</h4>
          <p id="govFlow3Desc">进入 Backlog：按 Impact×Effort 排序。</p>
        </div>
        <div class="gov-box">
          <h4 id="govFlow4">System</h4>
          <p id="govFlow4Desc">更新 Design System：组件/模式/文案。</p>
        </div>
      </div>

      <div class="gov-grid">
        <div class="gov-card">
          <h3 id="gov1Title">高风险任务清单 / High-risk Tasks</h3>
          <ul class="gov-list" id="riskList"></ul>
        </div>
        <div class="gov-card">
          <h3 id="gov2Title">决策就绪标准 / Decision-ready Criteria</h3>
          <ul class="gov-list" id="decisionList"></ul>
        </div>
      </div>

      <!-- Repository & Naming -->
      <div class="repo-section">
        <div class="section-header">
          <h2 id="repoTitle">归档与命名规范 / Repository & Naming</h2>
          <p id="repoDesc">研究资产必须可追溯：统一命名、统一归档内容、统一链接到结论与行动项。</p>
        </div>
        <div class="repo-grid">
          <div>
            <h4 style="margin-bottom:16px;">命名格式 / Naming Convention</h4>
            <div class="repo-code">
              <code id="namingCode">YYYYMMDD_Surface_Topic_Method_vX</code>
              <button onclick="copyText('YYYYMMDD_Surface_Topic_Method_vX')">Copy</button>
            </div>
            <p style="font-size:13px; color:var(--text-secondary); margin-top:12px;">示例：20260114_DesktopOS_Onboarding_UT_v1</p>
          </div>
          <div>
            <h4 style="margin-bottom:16px;">必选归档项 / Required Artifacts</h4>
            <ul class="gov-list" id="requiredList">
              <li>研究计划 (Research Plan)</li>
              <li>访谈大纲/测试脚本 (Script)</li>
              <li>原始记录/录音录像 (Raw Evidence)</li>
              <li>洞察卡片 (Insight Cards)</li>
              <li>行动项清单 (Action Items)</li>
              <li>DS 更新建议 (DS Updates)</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modalTitle"></h3>
        <button class="modal-close" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">已复制到剪贴板</div>

  <script>
    const DATA = {
      status: [
        { id: 1, tag: 'Setup', title: '首次配置流程优化', titleEn: 'OOBE Flow Optimization', desc: '针对 NAS 首次初始化过程中的网络配置与账号绑定环节进行专项研究。', descEn: 'Special research on network config and account binding during NAS initialization.', summary: '用户在网络环境复杂时容易卡死，需要增加自动诊断。', summaryEn: 'Users get stuck in complex network environments; auto-diagnosis needed.', insights: '1. 术语过于专业；2. 进度反馈不明确。', insightsEn: '1. Jargon too technical; 2. Unclear progress feedback.', actions: '更新 OOBE 设计规范 v2.1', actionsEn: 'Update OOBE design spec v2.1', status: 'Done' },
        { id: 2, tag: 'Permission', title: '成员与权限管理研究', titleEn: 'Member & Permission Study', desc: '探索家庭场景下，管理员对普通成员文件夹访问权限的分配逻辑。', descEn: 'Explore permission allocation logic for family members in NAS.', summary: '现有的“读/写”维度不足以覆盖家庭隐私需求。', summaryEn: 'Existing Read/Write dimensions are insufficient for family privacy.', insights: '用户需要“仅查看但不允许下载”的细分权限。', insightsEn: 'Users need "View only, no download" granular permission.', actions: '新增“隐私分享”模式原型', actionsEn: 'New "Privacy Sharing" mode prototype', status: 'In Progress' },
        { id: 3, tag: 'Backup', title: '手机相册备份授权文案测试', titleEn: 'Mobile Photo Backup Copy Test', desc: '测试不同文案对用户开启“自动备份”意愿的影响。', descEn: 'Test impact of different copy on user willingness to enable auto-backup.', summary: '强调“隐私安全”比强调“空间释放”转化率高 15%。', summaryEn: 'Emphasizing "Privacy" has 15% higher conversion than "Space".', insights: '用户对“云端删除是否同步本地”存在极大顾虑。', insightsEn: 'Users worry about whether cloud deletion syncs to local.', actions: '全量上线“安全备份”版文案', actionsEn: 'Roll out "Secure Backup" copy', status: 'Done' }
      ],
      steps: [
        { id: 1, title: '需求对齐', titleEn: 'Alignment', what: '明确研究目标、核心问题、利益相关者及时间线。', whatEn: 'Define goals, core questions, stakeholders, and timeline.', output: '研究简报 (Research Brief)', outputEn: 'Research Brief' },
        { id: 2, title: '方案设计', titleEn: 'Design', what: '选择研究方法，编写招募标准，设计访谈大纲或测试脚本。', whatEn: 'Select methods, write recruitment criteria, design scripts.', output: '研究计划 (Research Plan)', outputEn: 'Research Plan' },
        { id: 3, title: '用户招募', titleEn: 'Recruitment', what: '根据标准筛选用户，完成邀约与排期。', whatEn: 'Filter users based on criteria, complete scheduling.', output: '用户名单 (User List)', outputEn: 'User List' },
        { id: 4, title: '执行研究', titleEn: 'Execution', what: '进行访谈、可用性测试或问卷发放，收集原始数据。', whatEn: 'Conduct interviews, UT, or surveys; collect raw data.', output: '原始记录 (Raw Notes/Recordings)', outputEn: 'Raw Notes/Recordings' },
        { id: 5, title: '分析洞察', titleEn: 'Analysis', what: '整理证据，提取发现点，转化为可行动的洞察。', whatEn: 'Organize evidence, extract findings, convert to insights.', output: '洞察卡片 (Insight Cards)', outputEn: 'Insight Cards' },
        { id: 6, title: '汇报决策', titleEn: 'Reporting', what: '同步研究结论，推动产品决策与 Backlog 优先级调整。', whatEn: 'Sync conclusions, drive decisions and backlog priority.', output: '研究报告 (Research Report)', outputEn: 'Research Report' },
        { id: 7, title: 'DS 更新', titleEn: 'DS Update', what: '将通用设计模式沉淀至 Design System，确保体验一致性。', whatEn: 'Archive patterns into Design System for consistency.', output: 'DS 组件/规范更新 (DS Updates)', outputEn: 'DS Updates' }
      ],
      methods: [
        { id: 1, tag: 'Qualitative', title: '半结构化访谈', titleEn: 'Semi-structured Interview', desc: '深入了解用户动机、担忧及心智模型。', descEn: 'Deep dive into user motivations, concerns, and mental models.', category: '定性' },
        { id: 2, tag: 'Qualitative', title: '任务型可用性测试', titleEn: 'Task-based UT', desc: '验证流程是否顺畅，发现操作障碍点。', descEn: 'Verify flow smoothness and identify operational barriers.', category: '定性' },
        { id: 3, tag: 'Qualitative', title: '情境走查', titleEn: 'Contextual Inquiry', desc: '在真实家庭/工作环境中观察实际行为。', descEn: 'Observe actual behavior in real home/work environments.', category: '定性' },
        { id: 4, tag: 'Quantitative', title: '问卷调查', titleEn: 'Survey', desc: '快速验证偏好，获取规模化数据支持。', descEn: 'Quickly verify preferences and get large-scale data support.', category: '定量' },
        { id: 5, tag: 'IA', title: '卡片分类', titleEn: 'Card Sorting', desc: '验证导航与命名是否符合用户分类方式。', descEn: 'Verify if navigation and naming match user mental models.', category: '信息架构' },
        { id: 6, tag: 'IA', title: '树状测试', titleEn: 'Tree Testing', desc: '验证路径直觉性，不依赖视觉设计。', descEn: 'Verify path intuition without relying on visual design.', category: '信息架构' },
        { id: 7, tag: 'Behavior', title: '日记研究', titleEn: 'Diary Study', desc: '观察长期使用习惯与告警发生后的真实反应。', descEn: 'Observe long-term habits and real reactions to alerts.', category: '长期行为' },
        { id: 8, tag: 'Behavior', title: '行为日志分析', titleEn: 'Log Analysis', desc: '通过埋点数据还原用户真实转化路径。', descEn: 'Restore real conversion paths via tracking data.', category: '数据分析' }
      ],
      templates: [
        { id: 1, tag: 'Plan', title: '通用研究计划模板', titleEn: 'General Research Plan', desc: '包含背景、目标、方法、排期等标准模块。', descEn: 'Standard modules: background, goals, methods, timeline.', content: '【研究计划模板】\n1. 研究背景：为什么要做这个研究？\n2. 研究目标：我们要解决什么问题？\n3. 研究方法：采用什么手段？\n4. 用户画像：招募什么样的用户？\n5. 时间排期：各阶段节点。', contentEn: '[Research Plan Template]\n1. Background: Why this study?\n2. Goals: What questions to solve?\n3. Methods: How to conduct?\n4. User Profile: Who to recruit?\n5. Timeline: Key milestones.' },
        { id: 2, tag: 'Script', title: '可用性测试脚本', titleEn: 'UT Script Template', desc: '包含开场白、任务设置、追问技巧。', descEn: 'Includes intro, task settings, and probing techniques.', content: '【UT 脚本模板】\n1. 开场白：告知目的，缓解紧张。\n2. 预热访谈：了解背景。\n3. 任务环节：设置 3-5 个核心任务。\n4. 满意度评价：ASQ/SUS 问卷。\n5. 结束语：感谢并赠送礼品。', contentEn: '[UT Script Template]\n1. Intro: Purpose and comfort.\n2. Warm-up: Background info.\n3. Tasks: 3-5 core tasks.\n4. Satisfaction: ASQ/SUS survey.\n5. Closing: Thanks and incentive.' },
        { id: 3, tag: 'Screener', title: '用户招募筛选表', titleEn: 'User Screener', desc: '针对 NAS 用户的分层招募标准。', descEn: 'Granular recruitment criteria for NAS users.', content: '【招募筛选表】\n- 新手用户：购买 1 个月内，仅使用基础备份。\n- 熟手用户：购买 6 个月以上，使用 Docker/虚拟机。\n- 管理员：家庭网络环境搭建者。', contentEn: '[User Screener]\n- Novice: <1 month, basic backup only.\n- Advanced: >6 months, uses Docker/VM.\n- Admin: Family network builder.' },
        { id: 4, tag: 'Insight', title: '标准洞察卡片', titleEn: 'Standard Insight Card', desc: '证据 → 含义 → 机会点的专业结构。', descEn: 'Professional structure: Evidence → Meaning → Opportunity.', content: '【洞察卡片模板】\n- 现象/证据：用户在 XX 页面停留了 30 秒。\n- 含义/痛点：用户找不到“确认”按钮。\n- 机会点/建议：将按钮改为悬浮固定位置。', contentEn: '[Insight Card Template]\n- Evidence: User stayed on XX page for 30s.\n- Meaning: User can\'t find "Confirm" button.\n- Opportunity: Fix button to floating position.' },
        { id: 5, tag: 'Archive', title: '研究归档清单', titleEn: 'Archive Checklist', desc: '确保研究资产可追溯的完整清单。', descEn: 'Complete checklist for traceable research assets.', content: '【归档清单】\n1. 研究计划 (PDF)\n2. 访谈大纲/脚本 (Doc)\n3. 原始录音/录像 (Link)\n4. 洞察卡片 (Board)\n5. 最终报告 (PPT/PDF)', contentEn: '[Archive Checklist]\n1. Plan (PDF)\n2. Script (Doc)\n3. Recordings (Link)\n4. Insight Cards (Board)\n5. Final Report (PPT/PDF)' }
      ],
      risks: [
        { title: '删除/格式化（不可逆）', titleEn: 'Delete/format (irreversible)', desc: '高风险操作必须经过二次验证与明确后果告知。', descEn: 'High-risk actions must have double verification and clear impact info.' },
        { title: '存储池/RAID 改动', titleEn: 'Storage pool/RAID changes', desc: '涉及底层数据结构的变动需提供进度预估。', descEn: 'Changes to data structures need progress estimation.' },
        { title: '权限与共享设置', titleEn: 'Permissions & sharing', desc: '确保隐私边界清晰，避免非授权访问。', descEn: 'Ensure clear privacy boundaries to avoid unauthorized access.' },
        { title: '远程访问与安全开关', titleEn: 'Remote access/security toggles', desc: '明确开启后的风险与便捷性权衡。', descEn: 'Clarify trade-offs between risk and convenience.' },
        { title: '恢复/回滚与一致性', titleEn: 'Recovery/rollback & consistency', desc: '验证数据恢复流程的可靠性与用户心智。', descEn: 'Verify reliability and user mental model of recovery.' }
      ],
      decisions: [
        { title: 'Clear output = Decision-ready', desc: '结论必须附证据（原话/截图/时间戳），直接回答“做还是不做”。', descEn: 'Evidence-linked (quotes/screenshots); directly answer "Go or No-go".' },
        { title: 'Trust & Risk', desc: '衡量用户对私有云存储的安全信任感与可控感。', descEn: 'Measure user trust and perceived control in private cloud storage.' },
        { title: 'Actionable Insights', desc: '每一个洞察必须对应一个 Backlog 任务与验收标准。', descEn: 'Every insight must map to a Backlog task and acceptance criteria.' },
        { title: 'Suggested Metrics', desc: '包含完成率、时长、错误率及犹豫点次数。', descEn: 'Includes success rate, time-on-task, error rate, and hesitations.' }
      ]
    };

    const I18N = {
      zh: {
        heroTitle: '用研规范与知识库',
        heroDesc: '为 NAS 桌面端、Web 管理端及移动端打造的标准化研究体系，确保研究结果可复现、可行动、可验证。',
        val1Title: '可复现 / Reproducible',
        val1Desc: '标准化的 SOP 流程与方法工具箱，确保不同研究员在面对相似问题时能产出一致的高质量结果。',
        val2Title: '可行动 / Actionable',
        val2Desc: '研究结论直接挂钩 Backlog 与 Design System，确保每一个洞察都能转化为具体的产品改进项。',
        val3Title: '可验证 / Verifiable',
        val3Desc: '建立核心体验指标（Suggested Metrics），通过持续的可用性测试验证设计方案的有效性。',
        statusTitle: '研究动态 / Research Status',
        statusDesc: '当前正在进行的重点研究项目及最新归档案例。',
        sopTitle: '标准研究流程 / Standard Research Flow (SOP)',
        sopDesc: '从需求对齐到 DS 更新的 7 步标准化作业程序。',
        methodsTitle: '方法工具箱 / Method Toolkit',
        methodsDesc: '根据研究问题选择最合适的方法。',
        templatesTitle: '实战模板 / Practical Templates',
        templatesDesc: '直接复用的计划、脚本与归档模板。',
        govTitle: '研究治理 / Research Governance',
        govDesc: '确保研究资产的长期价值与跨团队协作效率。',
        gov1Title: '高风险任务清单 / High-risk Tasks',
        gov2Title: '决策就绪标准 / Decision-ready Criteria',
        searchPlaceholder: '搜索方法 / 模板 / 研究案例...',
        btnCopy: '复制内容',
        btnDetail: '查看详情',
        btnPreview: '预览模板',
        toastCopy: '已复制到剪贴板',
        whatTitle: '本步要做什么',
        outputTitle: '本步产出',
        themeDark: 'Dark',
        themeLight: 'Light'
      },
      en: {
        heroTitle: 'Research Ops & Knowledge Base',
        heroDesc: 'Standardized research system for NAS Desktop, Web, and Mobile, ensuring results are reproducible, actionable, and verifiable.',
        val1Title: 'Reproducible',
        val1Desc: 'Standardized SOPs and toolkits ensure consistent high-quality results across different researchers.',
        val2Title: 'Actionable',
        val2Desc: 'Insights link directly to Backlog and Design System, ensuring every finding turns into product improvements.',
        val3Title: 'Verifiable',
        val3Desc: 'Establish core metrics and verify design effectiveness through continuous usability testing.',
        statusTitle: 'Research Status',
        statusDesc: 'Ongoing key research projects and latest archived cases.',
        sopTitle: 'Standard Research Flow (SOP)',
        sopDesc: '7-step standardized procedure from alignment to DS update.',
        methodsTitle: 'Method Toolkit',
        methodsDesc: 'Select the most appropriate method based on research questions.',
        templatesTitle: 'Practical Templates',
        templatesDesc: 'Ready-to-use templates for plans, scripts, and archives.',
        govTitle: 'Research Governance',
        govDesc: 'Ensuring long-term value of research assets and cross-team efficiency.',
        gov1Title: 'High-risk Tasks',
        gov2Title: 'Decision-ready Criteria',
        searchPlaceholder: 'Search methods / templates / cases...',
        btnCopy: 'Copy Content',
        btnDetail: 'View Details',
        btnPreview: 'Preview',
        toastCopy: 'Copied to clipboard',
        whatTitle: 'What to do',
        outputTitle: 'Outputs',
        themeDark: 'Dark',
        themeLight: 'Light'
      }
    };

    let currentLang = 'zh';
    let currentTheme = 'light';
    let currentMethodCat = '全部';
    let currentTplCat = '全部';
    let activeStep = 1;

    function toggleLang() {
      currentLang = currentLang === 'zh' ? 'en' : 'zh';
      updateUI();
    }

    function toggleTheme() {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', currentTheme);
      document.getElementById('themeToggle').textContent = currentTheme === 'light' ? 'Dark' : 'Light';
    }

    function updateUI() {
      const lang = I18N[currentLang];
      document.getElementById('heroTitle').textContent = lang.heroTitle;
      document.getElementById('heroDesc').textContent = lang.heroDesc;
      document.getElementById('val1Title').textContent = lang.val1Title;
      document.getElementById('val1Desc').textContent = lang.val1Desc;
      document.getElementById('val2Title').textContent = lang.val2Title;
      document.getElementById('val2Desc').textContent = lang.val2Desc;
      document.getElementById('val3Title').textContent = lang.val3Title;
      document.getElementById('val3Desc').textContent = lang.val3Desc;
      document.getElementById('statusTitle').textContent = lang.statusTitle;
      document.getElementById('statusDesc').textContent = lang.statusDesc;
      document.getElementById('sopTitle').textContent = lang.sopTitle;
      document.getElementById('sopDesc').textContent = lang.sopDesc;
      document.getElementById('methodsTitle').textContent = lang.methodsTitle;
      document.getElementById('methodsDesc').textContent = lang.methodsDesc;
      document.getElementById('templatesTitle').textContent = lang.templatesTitle;
      document.getElementById('templatesDesc').textContent = lang.templatesDesc;
      document.getElementById('govTitle').textContent = lang.govTitle;
      document.getElementById('govDesc').textContent = lang.govDesc;
      document.getElementById('gov1Title').textContent = lang.gov1Title;
      document.getElementById('gov2Title').textContent = lang.gov2Title;
      document.getElementById('searchInput').placeholder = lang.searchPlaceholder;
      document.getElementById('whatTitle').textContent = lang.whatTitle;
      document.getElementById('outputTitle').textContent = lang.outputTitle;

      renderStatus();
      renderSOP();
      renderMethodFilters();
      renderMethods();
      renderTplFilters();
      renderTemplates();
      renderGovernance();
    }

    function renderStatus() {
      const grid = document.getElementById('statusGrid');
      grid.innerHTML = DATA.status.map(s => `
        <div class="card">
          <div class="card-tag">${s.tag}</div>
          <h3>${currentLang === 'zh' ? s.title : s.titleEn}</h3>
          <p>${currentLang === 'zh' ? s.desc : s.descEn}</p>
          <div class="card-footer">
            <span style="font-size:12px; color:var(--text-secondary)">${s.status}</span>
            <button class="card-btn" onclick="openStatusDetail(${s.id})">${I18N[currentLang].btnDetail}</button>
          </div>
        </div>
      `).join('');
    }

    function renderSOP() {
      const grid = document.getElementById('sopGrid');
      grid.innerHTML = DATA.steps.map(s => `
        <div class="sop-step ${activeStep === s.id ? 'active' : ''}" onclick="selectStep(${s.id})">
          <span>Step ${s.id}</span>
          <strong>${currentLang === 'zh' ? s.title : s.titleEn}</strong>
        </div>
      `).join('');
      
      const step = DATA.steps.find(s => s.id === activeStep);
      document.getElementById('sopDetail').classList.add('active');
      document.getElementById('sopWhatList').innerHTML = `<li>${currentLang === 'zh' ? step.what : step.whatEn}</li>`;
      document.getElementById('sopOutputList').innerHTML = `<li>${currentLang === 'zh' ? step.output : step.outputEn}</li>`;
    }

    function selectStep(id) {
      activeStep = id;
      renderSOP();
    }

    function renderMethodFilters() {
      const cats = ['全部', '定性', '定量', '信息架构', '长期行为', '数据分析'];
      const bar = document.getElementById('methodFilters');
      bar.innerHTML = cats.map(c => `
        <div class="filter-chip ${currentMethodCat === c ? 'active' : ''}" onclick="filterMethods('${c}')">${c}</div>
      `).join('');
    }

    function filterMethods(cat) {
      currentMethodCat = cat;
      renderMethodFilters();
      renderMethods();
    }

    function renderMethods() {
      const grid = document.getElementById('methodGrid');
      const filtered = DATA.methods.filter(m => currentMethodCat === '全部' || m.category === currentMethodCat);
      grid.innerHTML = filtered.map(m => `
        <div class="card">
          <div class="card-tag">${m.tag}</div>
          <h3>${currentLang === 'zh' ? m.title : m.titleEn}</h3>
          <p>${currentLang === 'zh' ? m.desc : m.descEn}</p>
          <div class="card-footer">
            <button class="card-btn" onclick="openMethodDetail(${m.id})">${I18N[currentLang].btnDetail}</button>
          </div>
        </div>
      `).join('');
    }

    function renderTplFilters() {
      const cats = ['全部', 'Plan', 'Script', 'Screener', 'Insight', 'Archive'];
      const bar = document.getElementById('tplFilters');
      bar.innerHTML = cats.map(c => `
        <div class="filter-chip ${currentTplCat === c ? 'active' : ''}" onclick="filterTpls('${c}')">${c}</div>
      `).join('');
    }

    function filterTpls(cat) {
      currentTplCat = cat;
      renderTplFilters();
      renderTemplates();
    }

    function renderTemplates() {
      const grid = document.getElementById('tplGrid');
      const filtered = DATA.templates.filter(t => currentTplCat === '全部' || t.tag === currentTplCat);
      grid.innerHTML = filtered.map(t => `
        <div class="card">
          <div class="card-tag">${t.tag}</div>
          <h3>${currentLang === 'zh' ? t.title : t.titleEn}</h3>
          <p>${currentLang === 'zh' ? t.desc : t.descEn}</p>
          <div class="card-footer">
            <button class="card-btn" onclick="openTemplate(${t.id})">${I18N[currentLang].btnPreview}</button>
            <button class="card-btn" onclick="copyText(DATA.templates.find(x=>x.id===${t.id})[currentLang==='zh'?'content':'contentEn'])">${I18N[currentLang].btnCopy}</button>
          </div>
        </div>
      `).join('');
    }

    function renderGovernance() {
      document.getElementById('riskList').innerHTML = DATA.risks.map(r => `
        <li>
          <div>
            <strong>${currentLang === 'zh' ? r.title : r.titleEn}</strong>
            <div style="font-size:12px; color:var(--text-secondary)">${currentLang === 'zh' ? r.desc : r.descEn}</div>
          </div>
        </li>
      `).join('');
      document.getElementById('decisionList').innerHTML = DATA.decisions.map(d => `
        <li>
          <div>
            <strong>${currentLang === 'zh' ? d.title : d.titleEn}</strong>
            <div style="font-size:12px; color:var(--text-secondary)">${currentLang === 'zh' ? d.desc : d.descEn}</div>
          </div>
        </li>
      `).join('');
    }

    function openStatusDetail(id) {
      const s = DATA.status.find(x => x.id === id);
      const content = `
        <div class="modal-grid" style="display:grid; grid-template-columns:1fr 1fr; gap:24px;">
          <div>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '摘要' : 'Summary'}</h4>
            <p style="font-size:14px; margin-bottom:16px;">${currentLang === 'zh' ? s.summary : s.summaryEn}</p>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '洞察' : 'Insights'}</h4>
            <p style="font-size:14px;">${currentLang === 'zh' ? s.insights : s.insightsEn}</p>
          </div>
          <div>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '行动项' : 'Actions'}</h4>
            <p style="font-size:14px; margin-bottom:16px;">${currentLang === 'zh' ? s.actions : s.actionsEn}</p>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '状态' : 'Status'}</h4>
            <span class="card-tag">${s.status}</span>
          </div>
        </div>
      `;
      openModal(currentLang === 'zh' ? s.title : s.titleEn, s.tag, content);
    }

    function openMethodDetail(id) {
      const m = DATA.methods.find(x => x.id === id);
      const content = `
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:24px;">
          <div>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '适用场景' : 'Use Case'}</h4>
            <p style="font-size:14px;">${currentLang === 'zh' ? m.desc : m.descEn}</p>
          </div>
          <div>
            <h4 style="margin-bottom:8px;">${currentLang === 'zh' ? '建议产出' : 'Suggested Outputs'}</h4>
            <ul style="font-size:14px; padding-left:16px;">
              <li>${currentLang === 'zh' ? '研究报告' : 'Research Report'}</li>
              <li>${currentLang === 'zh' ? '洞察卡片' : 'Insight Cards'}</li>
            </ul>
          </div>
        </div>
      `;
      openModal(currentLang === 'zh' ? m.title : m.titleEn, m.tag, content);
    }

    function openTemplate(id) {
      const t = DATA.templates.find(x => x.id === id);
      const content = `<pre>${currentLang === 'zh' ? t.content : t.contentEn}</pre>`;
      openModal(currentLang === 'zh' ? t.title : t.titleEn, t.tag, content);
    }

    function openModal(title, tag, content) {
      document.getElementById('modalTitle').textContent = title;
      document.getElementById('modalBody').innerHTML = content;
      document.getElementById('modalOverlay').classList.add('show');
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('show');
    }

    function copyText(text) {
      navigator.clipboard.writeText(text).then(() => {
        const toast = document.getElementById('toast');
        toast.textContent = I18N[currentLang].toastCopy;
        toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 2000);
      });
    }

    function handleSearch() {
      const q = document.getElementById('searchInput').value.toLowerCase();
      // Simple search logic for demo
      renderStatus();
      renderMethods();
      renderTemplates();
    }

    // Initial Render
    updateUI();
  </script>
</body>
</html>
