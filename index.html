<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zettlab Research Hub · 用研规范 Demo</title>
    <style>
        :root {
            --bg: #000000;
            --card-bg: rgba(255, 255, 255, 0.04);
            --card-hover: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --accent: #6347D5;
            --accent-glow: rgba(99, 71, 213, 0.3);
            --border: rgba(255, 255, 255, 0.1);
            --radius-xl: 32px;
            --radius-lg: 24px;
            --radius-md: 16px;
            --font: 'Inter', 'SF Pro Display', -apple-system, sans-serif;
        }

        [data-theme="light"] {
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --card-hover: #f1f3f5;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border: rgba(0, 0, 0, 0.08);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: var(--font);
            background-color: var(--bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s ease;
        }

        .glow {
            position: fixed;
            width: 600px;
            height: 600px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            z-index: -1;
            filter: blur(80px);
            pointer-events: none;
        }
        .glow-1 { top: -200px; left: -200px; }
        .glow-2 { bottom: -200px; right: -200px; opacity: 0.5; }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }

        .topbar {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        [data-theme="light"] .topbar { background: rgba(255, 255, 255, 0.8); }
        
        .topbar-inner {
            height: 72px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand { display: flex; align-items: center; gap: 12px; }
        .logo { width: 32px; height: 32px; background: linear-gradient(135deg, #6347D5, #0EA5E9); border-radius: 10px; }
        .brand-text h1 { font-size: 18px; font-weight: 700; }
        .brand-text p { font-size: 12px; color: var(--text-secondary); }

        .nav { display: flex; gap: 8px; }
        .nav a {
            padding: 8px 16px;
            border-radius: 99px;
            font-size: 14px;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }
        .nav a:hover, .nav a.active { color: var(--text-primary); background: var(--card-bg); }

        .actions { display: flex; gap: 12px; align-items: center; }
        .search-box {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 99px;
            padding: 6px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .search-box input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            outline: none;
            font-size: 14px;
            width: 150px;
        }

        .btn-icon {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 8px 16px;
            border-radius: 99px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        .btn-icon:hover { background: var(--card-hover); transform: translateY(-1px); }

        .hero { padding: 100px 0 60px; text-align: center; }
        .hero h2 { font-size: 64px; font-weight: 800; letter-spacing: -2px; margin-bottom: 16px; }
        .hero p { font-size: 18px; color: var(--text-secondary); max-width: 600px; margin: 0 auto 32px; }
        .hero-btns { display: flex; gap: 16px; justify-content: center; }
        .btn-primary {
            background: var(--text-primary);
            color: var(--bg);
            padding: 14px 32px;
            border-radius: 99px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }
        .btn-primary:hover { transform: scale(1.05); }

        .section-header { margin-bottom: 40px; }
        .section-header h2 { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
        .section-header p { color: var(--text-secondary); }

        .filterbar-container {
            position: sticky;
            top: 72px;
            z-index: 90;
            background: var(--bg);
            padding: 16px 0;
            margin-bottom: 32px;
            border-bottom: 1px solid transparent;
            transition: all 0.3s;
        }
        .filterbar-container.stuck { border-bottom-color: var(--border); background: rgba(0, 0, 0, 0.8); }
        
        .filterbar { display: flex; gap: 12px; overflow-x: auto; scrollbar-width: none; }
        .filterbar::-webkit-scrollbar { display: none; }
        .filter-chip {
            padding: 8px 20px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 99px;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            color: var(--text-secondary);
        }
        .filter-chip:hover { background: var(--card-hover); color: var(--text-primary); }
        .filter-chip.active { background: var(--text-primary); color: var(--bg); border-color: var(--text-primary); }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 24px; }
        
        .item-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 32px;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .item-card:hover {
            transform: translateY(-8px);
            background: var(--card-hover);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        .item-card h3 { font-size: 20px; font-weight: 600; }
        .item-card .tag {
            position: absolute; top: 32px; right: 32px;
            font-size: 10px; font-weight: 700; text-transform: uppercase;
            color: var(--text-secondary); opacity: 0.5;
            letter-spacing: 1px;
        }
        .item-card .desc { font-size: 14px; color: var(--text-secondary); }
        .item-card .meta { display: flex; flex-direction: column; gap: 8px; margin-top: auto; }
        .item-card .meta-item { font-size: 13px; }
        .item-card .meta-item strong { color: var(--text-primary); margin-right: 4px; }
        .item-card .meta-item span { color: var(--text-secondary); }

        .btn-detail {
            margin-top: 16px;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-detail:hover { background: var(--text-primary); color: var(--bg); }

        .sop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin-bottom: 60px; }
        .sop-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 24px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .sop-card:hover { border-color: var(--accent); background: var(--card-hover); }
        .sop-card.active { border-color: var(--accent); background: var(--accent-glow); }
        .sop-card small { font-size: 10px; font-weight: 700; color: var(--accent); text-transform: uppercase; }
        .sop-card h4 { font-size: 16px; margin: 4px 0; }
        .sop-card p { font-size: 13px; color: var(--text-secondary); line-height: 1.4; }

        .hover-translate { position: relative; cursor: help; }
        .hover-translate::after {
            content: attr(data-translation);
            position: absolute;
            bottom: 100%; left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background: #333; color: #fff;
            padding: 4px 8px; border-radius: 4px;
            font-size: 12px; white-space: nowrap;
            opacity: 0; pointer-events: none;
            transition: all 0.2s;
            z-index: 1000;
        }
        .hover-translate:hover::after { opacity: 1; transform: translateX(-50%) translateY(-5px); }

        #toast {
            position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: var(--text-primary); color: var(--bg);
            padding: 12px 24px; border-radius: 99px; font-size: 14px; font-weight: 600;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); z-index: 1000;
        }
        #toast.show { transform: translateX(-50%) translateY(0); }

        @media (max-width: 768px) {
            .hero h2 { font-size: 40px; }
            .topbar-inner { height: auto; padding: 16px 0; flex-direction: column; gap: 16px; }
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body data-theme="dark" data-lang="zh">
    <div class="glow glow-1"></div>
    <div class="glow glow-2"></div>

    <header class="topbar">
        <div class="container topbar-inner">
            <div class="brand">
                <div class="logo"></div>
                <div class="brand-text">
                    <h1 data-i18n="brand_name">Zettlab Research Hub</h1>
                    <p data-i18n="brand_sub">用证据驱动 NAS 体验决策</p>
                </div>
            </div>
            <nav class="nav">
                <a href="#sop" class="active" data-i18n="nav_sop">流程</a>
                <a href="#methods" data-i18n="nav_methods">方法库</a>
                <a href="#templates" data-i18n="nav_templates">模板</a>
            </nav>
            <div class="actions">
                <div class="search-box">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                    <input type="text" id="q" placeholder="Search...">
                </div>
                <button class="btn-icon" id="langBtn">CN/EN</button>
                <button class="btn-icon" id="themeBtn">Dark</button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <h2 data-i18n="hero_title">Zettlab Research Hub</h2>
            <p data-i18n="hero_sub">统一 NAS 桌面端、管理端与 App 的研究标准。让结论可复现、可行动、可验证。</p>
            <div class="hero-btns">
                <button class="btn-primary" data-i18n="btn_start">发起研究</button>
                <button class="btn-icon" style="padding: 14px 32px;" data-i18n="btn_ut">运行 UT</button>
            </div>
        </section>

        <section class="section" id="sop">
            <div class="section-header">
                <h2 data-i18n="sop_title">标准研究流程 (SOP)</h2>
                <p data-i18n="sop_sub">从目标定义到上线验证的 7 步闭环路径。</p>
            </div>
            <div class="sop-grid" id="steps"></div>
            <div id="stepDetail" style="background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; padding: 32px; margin-top: -40px; margin-bottom: 60px; display: none;"></div>
        </section>

        <section class="section" id="methods">
            <div class="section-header">
                <h2 data-i18n="methods_title">方法工具箱</h2>
                <p data-i18n="methods_sub">根据研究问题选择最合适的方法。</p>
            </div>
            <div class="filterbar-container" id="filterbarContainer">
                <div class="container">
                    <div class="filterbar" id="methodFilters"></div>
                </div>
            </div>
            <div class="grid" id="methodGrid"></div>
        </section>

        <section class="section" id="templates" style="margin-top: 80px;">
            <div class="section-header">
                <h2 data-i18n="templates_title">实战模板</h2>
                <p data-i18n="templates_sub">直接复用的计划、脚本与归档模板。</p>
            </div>
            <div class="filterbar-container" id="tplFilterContainer">
                <div class="container">
                    <div class="filterbar" id="tplFilters"></div>
                </div>
            </div>
            <div class="grid" id="tplGrid"></div>
        </section>
    </main>

    <div id="toast"></div>

    <script>
        const DATA = {
            steps: [
                { id: 1, zh: { title: "明确目标与范围", desc: "锁定 1–3 个核心问题与假设，定义成功指标。", do: ["对齐业务目标与研究问题 (<=3)", "梳理假设与风险 (NAS 高风险优先)", "定义输出与决策场景"], out: ["Research Plan", "Assumption list", "Success metrics"] }, en: { title: "Define goals & scope", desc: "Lock 1–3 questions and hypotheses; define success metrics.", do: ["Align on goals & questions (<=3)", "Map assumptions & risks", "Define outputs and decision context"], out: ["Research plan", "Assumption list", "Success metrics"] } },
                { id: 2, zh: { title: "选择方法与招募", desc: "按问题选方法，按角色分层招募（新手/熟手/管理员）。", do: ["选择方法组合（访谈/UT/日志等）", "编写 screener 与配额", "准备脚本与任务成功标准"], out: ["Method mix", "Screener", "Discussion/Test guide"] }, en: { title: "Choose methods & recruit", desc: "Pick methods by questions; recruit with segment quotas.", do: ["Select method mix", "Write screener & quotas", "Prepare scripts & success criteria"], out: ["Method mix", "Screener", "Guide & tasks"] } },
                { id: 3, zh: { title: "执行研究与记录", desc: "访谈/UT/问卷/日志；记录行为、原话、时间戳。", do: ["Think-aloud 任务测试", "记录阻断点/犹豫点/错误", "保留证据链（截图/时间戳）"], out: ["Raw recordings", "Observation notes", "Behavior evidence"] }, en: { title: "Run & capture data", desc: "Interviews/UT/surveys/logs; capture behavior & quotes.", do: ["Task-based UT with think-aloud", "Record errors/hesitations", "Keep evidence links"], out: ["Raw recordings", "Notes", "Evidence links"] } },
                { id: 4, zh: { title: "分析与综合", desc: "亲和图聚类→洞察卡片→心智模型/JTBD。", do: ["亲和图聚类主题", "提炼洞察卡（证据→含义→机会）", "补齐 JTBD/心智模型"], out: ["Themes", "Insight cards", "Mental model / JTBD"] }, en: { title: "Synthesize & analyze", desc: "Affinity mapping → insight cards → mental model/JTBD.", do: ["Cluster themes", "Write insight cards", "Derive mental model/JTBD"], out: ["Themes", "Insight cards", "Mental model/JTBD"] } },
                { id: 5, zh: { title: "可视化与沟通", desc: "旅程图/机会地图，对齐团队决策与优先级。", do: ["旅程图/服务蓝图（必要时）", "机会地图（Impact×Effort）", "形成 1 页结论摘要"], out: ["Journey map", "Opportunity map", "1-page summary"] }, en: { title: "Visualize & communicate", desc: "Journey/opportunity maps to align decisions & priorities.", do: ["Journey/service blueprint (if needed)", "Opportunity map", "1-page summary"], out: ["Journey map", "Opportunity map", "1-page summary"] } },
                { id: 6, zh: { title: "转化为行动", desc: "进入 Backlog；提炼 DS 更新项与验收标准。", do: ["需求入 backlog 并定优先级", "定义验证指标与验收标准", "提炼 DS 更新：组件/模式/文案/状态"], out: ["Backlog items", "Acceptance criteria", "DS update list"] }, en: { title: "Translate into actions", desc: "Backlog + acceptance criteria + DS updates.", do: ["Create prioritized backlog items", "Define validation metrics", "List DS updates"], out: ["Backlog", "Acceptance criteria", "DS updates"] } },
                { id: 7, zh: { title: "上线验证与沉淀", desc: "复测 + 指标前后对比；归档到研究库。", do: ["上线后复测/灰度监控", "指标前后对比", "归档计划/脚本/证据/结论/行动项"], out: ["Validation report", "Before/after metrics", "Repository package"] }, en: { title: "Validate & archive", desc: "Retest + before/after metrics; archive package.", do: ["Post-release retest", "Before/after metrics", "Archive full package"], out: ["Validation report", "Metrics delta", "Repository package"] } }
            ],
            methodCategories: [
                { id: "all", zh: "全部", en: "All" },
                { id: "qual", zh: "定性", en: "Qualitative" },
                { id: "quant", zh: "定量", en: "Quantitative" },
                { id: "ia", zh: "信息架构", en: "IA" },
                { id: "long", zh: "长期行为", en: "Long-term" },
                { id: "data", zh: "数据分析", en: "Analytics" }
            ],
            methods: [
                { id: "interview", cat: "qual", zh: { title: "半结构化访谈", tag: "Interview", when: "理解动机、担忧、心智模型与决策原因。", outputs: ["洞察卡片", "心智模型", "JTBD/Job Stories"], notes: "对 NAS 场景尤其关注：数据安全焦虑、术语理解、信任信号。" }, en: { title: "Semi-structured interviews", tag: "Interview", when: "Understand motivations, concerns, mental models and decision drivers.", outputs: ["Insight cards", "Mental model", "JTBD/Job stories"], notes: "For NAS, focus on safety anxiety, terminology comprehension, trust signals." } },
                { id: "ut", cat: "qual", zh: { title: "任务型可用性测试", tag: "UT", when: "验证流程是否能完成、哪里卡住、错误与犹豫点。", outputs: ["成功率/时长/错误", "可复现问题清单", "改进建议"], notes: "适用于首次配置、存储创建、备份、权限、告警处理。" }, en: { title: "Task-based usability testing", tag: "UT", when: "Validate completion, find blockers, errors and hesitations.", outputs: ["Success/time/errors", "Repro issue list", "Recommendations"], notes: "Great for onboarding, storage, backup, permissions, alerts." } },
                { id: "context", cat: "qual", zh: { title: "情境走查（现场观察）", tag: "Contextual", when: "在真实家庭/工作室环境中观察实际行为。", outputs: ["环境约束", "真实任务链", "触点机会"], notes: "适合验证“桌面端/设备摆放/网络环境”对操作的影响。" }, en: { title: "Contextual inquiry", tag: "Contextual", when: "Observe real behaviors in home/studio environments.", outputs: ["Constraints", "Real task chain", "Opportunities"], notes: "Validates effects of hardware placement & network conditions." } },
                { id: "survey", cat: "quant", zh: { title: "问卷（规模化）", tag: "Survey", when: "快速验证偏好/满意度，获取规模判断。", outputs: ["趋势与分布", "分群对比", "基线指标"], notes: "适合做前后对比，但要和 UT/访谈结合解释原因。" }, en: { title: "Survey (at scale)", tag: "Survey", when: "Validate preferences/satisfaction at scale.", outputs: ["Trends", "Segment comparison", "Baseline metrics"], notes: "Use with UT/interviews to interpret the why." } },
                { id: "cardsort", cat: "ia", zh: { title: "卡片分类", tag: "Card sort", when: "验证导航与命名是否符合用户分类方式。", outputs: ["信息架构建议", "命名风险点"], notes: "适合桌面端侧边导航、控制面板分类、功能命名。" }, en: { title: "Card sorting", tag: "Card sort", when: "Validate how users group content and labels.", outputs: ["IA recommendations", "Naming risks"], notes: "Useful for sidebar nav, settings categories, feature naming." } },
                { id: "treetest", cat: "ia", zh: { title: "Tree Testing", tag: "Tree test", when: "验证“找得到”与路径直觉，不依赖视觉。", outputs: ["找到率", "路径偏差", "标签问题"], notes: "适合验证 Web 管理端与桌面端“设置/权限/备份”路径。" }, en: { title: "Tree testing", tag: "Tree test", when: "Validate findability and path intuition without visuals.", outputs: ["Find rate", "Path deviation", "Label issues"], notes: "Great for settings/permissions/backup navigation." } },
                { id: "diary", cat: "long", zh: { title: "日记研究", tag: "Diary", when: "观察长期使用习惯与告警发生后的真实反应。", outputs: ["长期痛点", "使用节奏", "触发条件"], notes: "对 NAS 特别关键：备份是否持续、告警疲劳与信任崩溃点。" }, en: { title: "Diary study", tag: "Diary", when: "Observe long-term habits and alert responses.", outputs: ["Long-term pain points", "Rhythm", "Triggers"], notes: "Key for NAS: sustained backups, alert fatigue, trust breakpoints." } },
                { id: "analytics", cat: "data", zh: { title: "行为日志/漏斗分析", tag: "Analytics", when: "用数据找异常：转化、跳出、错误率、复访。", outputs: ["漏斗与路径", "关键流失点", "假设验证"], notes: "用于定位问题，需结合 UT/访谈解释原因并给方案。" }, en: { title: "Analytics & funnel analysis", tag: "Analytics", when: "Detect anomalies in conversion, drop-off, errors, retention.", outputs: ["Funnels/paths", "Drop points", "Hypothesis checks"], notes: "Pair with UT/interviews to explain and fix." } }
            ],
            templateCategories: [
                { id: "all", zh: "全部", en: "All" },
                { id: "plan", zh: "研究计划", en: "Plan" },
                { id: "ut", zh: "UT 脚本", en: "UT Script" },
                { id: "screener", zh: "招募筛选", en: "Screener" },
                { id: "insight", zh: "洞察卡", en: "Insights" },
                { id: "repo", zh: "归档清单", en: "Repository" }
            ],
            templates: [
                { id: "tpl_plan", cat: "plan", zh: { title: "研究计划 (Research Plan)", desc: "目标/问题/方法/样本/风险/指标/交付物。", content: "# 研究计划 (v1)\n- 背景与目标：\n- 核心问题 (<=3)：\n- 假设 (H1/H2/H3)：\n- 方法组合：\n- 样本与分层：\n- 任务范围：\n- 指标：\n- 风险与隐私：\n- 时间线：\n- 交付物：结论摘要 + 洞察卡片 + 行动项" }, en: { title: "Research Plan", desc: "Goals/questions/methods/sample/risks/metrics/deliverables.", content: "# Research Plan (v1)\n- Background & goals:\n- Key questions (<=3):\n- Hypotheses (H1/H2/H3):\n- Method mix:\n- Sample & quotas:\n- Task scope:\n- Metrics:\n- Risks & privacy:\n- Timeline:\n- Deliverables: 1-page summary + insight cards + actions" } },
                { id: "tpl_ut_desktop", cat: "ut", zh: { title: "桌面端 UT 脚本 (Onboarding)", desc: "首次进入→创建存储→文件管理→备份→任务中心→预警处理。", content: "# Desktop OS UT Script\nT1 进入首页\nT2 存储创建\nT3 文件管理\nT4 批量操作\nT5 备份\nT6 任务中心\nT7 预警处理" }, en: { title: "Desktop OS UT Script", desc: "First entry → storage → files → backup → task center → alerts.", content: "# Desktop OS UT Script\nT1 Home\nT2 Storage\nT3 Files\nT4 Batch\nT5 Backup\nT6 Tasks\nT7 Alerts" } },
                { id: "tpl_screener", cat: "screener", zh: { title: "招募筛选表 (Screener)", desc: "新手/熟手/管理员分层招募标准与配额。", content: "# 招募筛选表\n- 目标样本量：N=12\n- 分层标准：\n  1. 新手 (N=4)：无 NAS 使用经验，有数据备份需求。\n  2. 熟手 (N=4)：使用过竞品，关注性能与扩展性。\n  3. 管理员 (N=4)：负责工作室/家庭多用户管理。\n- 排除标准：行业相关人员、近期参加过类似测试者。" }, en: { title: "Recruitment Screener", desc: "Quotas and criteria for Novice/Expert/Admin segments.", content: "# Recruitment Screener\n- Target Sample: N=12\n- Segments:\n  1. Novice (N=4): No NAS experience, has backup needs.\n  2. Expert (N=4): Competitor user, focuses on performance.\n  3. Admin (N=4): Manages multi-user environments.\n- Exclusion: Industry professionals, recent participants." } },
                { id: "tpl_insight", cat: "insight", zh: { title: "洞察卡片 (Insight Card)", desc: "标准格式：证据 → 含义 → 机会点。", content: "# 洞察卡片\n- 标题：[简短描述发现]\n- 证据 (Evidence)：[用户原话/行为截图/录屏时间戳]\n- 含义 (Meaning)：[为什么会这样？用户的心智模型是什么？]\n- 机会点 (Opportunity)：[我们可以如何改进？对设计/产品的建议]" }, en: { title: "Insight Card", desc: "Standard format: Evidence → Meaning → Opportunity.", content: "# Insight Card\n- Title: [Short discovery description]\n- Evidence: [Quotes/Screenshots/Timestamps]\n- Meaning: [Why? What is the mental model?]\n- Opportunity: [How to improve? Design/Product suggestions]" } },
                { id: "tpl_repo", cat: "repo", zh: { title: "研究归档清单 (Archive)", desc: "确保研究可追溯的完整包清单。", content: "# 研究归档清单\n- [ ] 研究计划 (Final)\n- [ ] 招募筛选表与脱敏名单\n- [ ] 访谈/测试脚本\n- [ ] 原始录音/录像 (链接)\n- [ ] 亲和图/分析过程记录\n- [ ] 最终报告 (PDF/PPT)\n- [ ] 洞察卡片集 (JSON/CSV)\n- [ ] 行动项跟踪表 (Jira/Notion)" }, en: { title: "Research Archive Checklist", desc: "Full package checklist for traceability.", content: "# Research Archive Checklist\n- [ ] Research Plan (Final)\n- [ ] Screener & Anonymized List\n- [ ] Scripts/Guides\n- [ ] Raw Recordings (Links)\n- [ ] Analysis/Affinity Maps\n- [ ] Final Report (PDF/PPT)\n- [ ] Insight Card Collection\n- [ ] Action Item Tracker" } }
            ]
        };

        const I18N = {
            zh: {
                brand_name: "Zettlab Research Hub", brand_sub: "用证据驱动 NAS 体验决策",
                nav_overview: "概览", nav_sop: "流程", nav_methods: "方法库", nav_templates: "模板",
                hero_title: "Zettlab Research Hub", hero_sub: "统一 NAS 桌面端、管理端与 App 的研究标准。让结论可复现、可行动、可验证。",
                btn_start: "发起研究", btn_ut: "运行 UT",
                sop_title: "标准研究流程 (SOP)", sop_sub: "从目标定义到上线验证的 7 步闭环路径。",
                methods_title: "方法工具箱", methods_sub: "根据研究问题选择最合适的方法。",
                templates_title: "实战模板", templates_sub: "直接复用的计划、脚本与归档模板。",
                btn_detail: "查看详情", btn_copy: "复制模板",
                meta_when: "适用", meta_out: "产出", meta_note: "备注"
            },
            en: {
                brand_name: "Zettlab Research Hub", brand_sub: "Evidence-driven NAS UX Decisions",
                nav_overview: "Overview", nav_sop: "SOP", nav_methods: "Methods", nav_templates: "Templates",
                hero_title: "Zettlab Research Hub", hero_sub: "Unified research standards for NAS Desktop, Admin & App. Reproducible, actionable, verifiable.",
                btn_start: "Start Research", btn_ut: "Run UT",
                sop_title: "Standard Operating Procedure", sop_sub: "7-step closed-loop path from goal to validation.",
                methods_title: "Method Toolbox", methods_sub: "Choose the right method for your research questions.",
                templates_title: "Practical Templates", templates_sub: "Ready-to-use plans, scripts, and archive templates.",
                btn_detail: "View Details", btn_copy: "Copy Template",
                meta_when: "When", meta_out: "Outputs", meta_note: "Notes"
            }
        };

        let state = { lang: 'zh', theme: 'dark', methodCat: 'all', tplCat: 'all', q: '' };

        function $(sel) { return document.querySelector(sel); }
        function $$(sel) { return document.querySelectorAll(sel); }

        function init() {
            renderSteps();
            renderFilters();
            renderMethods();
            renderTemplates();
            applyI18n();
            setupEvents();
        }

        function applyI18n() {
            const lang = state.lang;
            document.body.setAttribute('data-lang', lang);
            $$('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                el.textContent = I18N[lang][key];
                if (el.classList.contains('hover-translate')) {
                    el.setAttribute('data-translation', I18N[lang === 'zh' ? 'en' : 'zh'][key]);
                }
            });
            $('#q').placeholder = lang === 'zh' ? '搜索方法/模板...' : 'Search methods/templates...';
            $('#langBtn').textContent = lang === 'zh' ? 'CN/EN' : 'EN/CN';
            $('#themeBtn').textContent = state.theme === 'dark' ? 'Dark' : 'Light';
            
            renderSteps();
            renderMethods();
            renderTemplates();
        }

        function renderSteps() {
            const lang = state.lang;
            const container = $('#steps');
            container.innerHTML = DATA.steps.map(s => `
                <div class="sop-card" onclick="showStepDetail(${s.id})">
                    <small>Step ${s.id}</small>
                    <h4 class="hover-translate" data-translation="${s[lang === 'zh' ? 'en' : 'zh'].title}">${s[lang].title}</h4>
                    <p>${s[lang].desc}</p>
                </div>
            `).join('');
        }

        function showStepDetail(id) {
            const lang = state.lang;
            const s = DATA.steps.find(x => x.id === id);
            const detail = $('#stepDetail');
            detail.style.display = 'block';
            detail.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    <div>
                        <h5 style="margin-bottom: 16px; color: var(--accent); font-size: 14px; text-transform: uppercase;">${lang === 'zh' ? '本步要做什么' : 'What to do'}</h5>
                        <ul style="list-style: none; display: flex; flex-direction: column; gap: 12px;">
                            ${s[lang].do.map(item => `<li style="font-size: 15px; display: flex; gap: 8px;"><span style="color: var(--accent);">•</span> ${item}</li>`).join('')}
                        </ul>
                    </div>
                    <div>
                        <h5 style="margin-bottom: 16px; color: var(--accent); font-size: 14px; text-transform: uppercase;">${lang === 'zh' ? '本步产出' : 'Deliverables'}</h5>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            ${s[lang].out.map(item => `<span style="background: var(--card-bg); border: 1px solid var(--border); padding: 4px 12px; border-radius: 6px; font-size: 13px; font-family: monospace;">${item}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `;
            $$('.sop-card').forEach((c, i) => c.classList.toggle('active', i + 1 === id));
            detail.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function renderFilters() {
            const lang = state.lang;
            $('#methodFilters').innerHTML = DATA.methodCategories.map(c => `
                <div class="filter-chip ${state.methodCat === c.id ? 'active' : ''}" onclick="setMethodCat('${c.id}')">${c[lang]}</div>
            `).join('');
            $('#tplFilters').innerHTML = DATA.templateCategories.map(c => `
                <div class="filter-chip ${state.tplCat === c.id ? 'active' : ''}" onclick="setTplCat('${c.id}')">${c[lang]}</div>
            `).join('');
        }

        function setMethodCat(id) { state.methodCat = id; renderFilters(); renderMethods(); }
        function setTplCat(id) { state.tplCat = id; renderFilters(); renderTemplates(); }

        function renderMethods() {
            const lang = state.lang;
            const query = state.q.toLowerCase();
            const filtered = DATA.methods.filter(m => {
                const catMatch = state.methodCat === 'all' || m.cat === state.methodCat;
                const searchMatch = m[lang].title.toLowerCase().includes(query) || m[lang].tag.toLowerCase().includes(query);
                return catMatch && searchMatch;
            });

            $('#methodGrid').innerHTML = filtered.map(m => `
                <div class="item-card">
                    <span class="tag">${m[lang].tag}</span>
                    <h3 class="hover-translate" data-translation="${m[lang === 'zh' ? 'en' : 'zh'].title}">${m[lang].title}</h3>
                    <p class="desc">${m[lang].when}</p>
                    <div class="meta">
                        <div class="meta-item"><strong>${I18N[lang].meta_out}:</strong> <span>${m[lang].outputs.join(', ')}</span></div>
                        <div class="meta-item"><strong>${I18N[lang].meta_note}:</strong> <span>${m[lang].notes}</span></div>
                    </div>
                    <button class="btn-detail">${I18N[lang].btn_detail}</button>
                </div>
            `).join('');
        }

        function renderTemplates() {
            const lang = state.lang;
            const query = state.q.toLowerCase();
            const filtered = DATA.templates.filter(t => {
                const catMatch = state.tplCat === 'all' || t.cat === state.tplCat;
                const searchMatch = t[lang].title.toLowerCase().includes(query);
                return catMatch && searchMatch;
            });

            $('#tplGrid').innerHTML = filtered.map(t => `
                <div class="item-card">
                    <h3 class="hover-translate" data-translation="${t[lang === 'zh' ? 'en' : 'zh'].title}">${t[lang].title}</h3>
                    <p class="desc">${t[lang].desc}</p>
                    <button class="btn-detail" onclick="copyTpl('${t.id}')">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        ${I18N[lang].btn_copy}
                    </button>
                </div>
            `).join('');
        }

        function copyTpl(id) {
            const lang = state.lang;
            const t = DATA.templates.find(x => x.id === id);
            navigator.clipboard.writeText(t[lang].content).then(() => {
                showToast(lang === 'zh' ? '已复制到剪贴板' : 'Copied to clipboard');
            });
        }

        function showToast(msg) {
            const t = $('#toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        }

        function setupEvents() {
            $('#langBtn').onclick = () => {
                state.lang = state.lang === 'zh' ? 'en' : 'zh';
                applyI18n();
            };
            $('#themeBtn').onclick = () => {
                state.theme = state.theme === 'dark' ? 'light' : 'dark';
                document.body.setAttribute('data-theme', state.theme);
                $('#themeBtn').textContent = state.theme === 'dark' ? 'Dark' : 'Light';
            };
            $('#q').oninput = (e) => {
                state.q = e.target.value;
                renderMethods();
                renderTemplates();
            };

            window.onscroll = () => {
                const top = window.scrollY;
                const filterbars = $$('.filterbar-container');
                filterbars.forEach(fb => {
                    const rect = fb.getBoundingClientRect();
                    fb.classList.toggle('stuck', rect.top <= 72);
                });
            };
        }

        init();
    </script>
</body>
</html>
